<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LiveKit SDK Load Test</title>
</head>
<body>
    <h1>LiveKit SDK Load Test</h1>
    <div id="status">Loading LiveKit SDK...</div>
    
    <script>
        // Try loading LiveKit SDK
        console.log('Starting LiveKit SDK load test...');
        
        // Check if already loaded
        if (typeof window.LiveKitClient !== 'undefined') {
            document.getElementById('status').innerHTML = '✅ LiveKit SDK already loaded!';
            console.log('LiveKit SDK already available:', window.LiveKitClient);
        } else {
            console.log('LiveKit SDK not found, loading...');
            
            // Create script element
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/livekit-client@2.5.7/dist/livekit-client.umd.js';
            
            script.onload = () => {
                console.log('LiveKit SDK script loaded');
                
                // Check if LiveKitClient is available
                if (typeof window.LiveKitClient !== 'undefined') {
                    document.getElementById('status').innerHTML = '✅ LiveKit SDK loaded successfully!';
                    console.log('LiveKitClient available:', window.LiveKitClient);
                    
                    // Test creating a Room object
                    try {
                        const room = new window.LiveKitClient.Room();
                        document.getElementById('status').innerHTML += '<br>✅ Room object created successfully!';
                        console.log('Room created:', room);
                    } catch (e) {
                        document.getElementById('status').innerHTML += '<br>❌ Error creating Room: ' + e.message;
                        console.error('Error creating Room:', e);
                    }
                } else {
                    document.getElementById('status').innerHTML = '❌ LiveKit SDK loaded but LiveKitClient not found';
                    console.error('LiveKitClient not found after script load');
                }
            };
            
            script.onerror = (error) => {
                document.getElementById('status').innerHTML = '❌ Failed to load LiveKit SDK';
                console.error('Failed to load LiveKit SDK:', error);
            };
            
            // Append script to head
            document.head.appendChild(script);
        }
        
        // Also check after a delay
        setTimeout(() => {
            console.log('Delayed check - window.LiveKitClient:', window.LiveKitClient);
            console.log('Delayed check - window.livekit:', window.livekit);
            console.log('All window properties:', Object.keys(window).filter(k => k.toLowerCase().includes('live')));
        }, 2000);
    </script>
</body>
</html>