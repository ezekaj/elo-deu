<!DOCTYPE html>
<html>
<head>
    <title>Socket.IO Test</title>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>
    <h1>Socket.IO Connection Test</h1>
    <div id="status">Connecting...</div>
    <pre id="log"></pre>
    
    <script>
        const log = document.getElementById('log');
        const status = document.getElementById('status');
        
        // Test direct Socket.IO connection
        const socket = io('https://e13f48333e1e.ngrok-free.app', {
            transports: ['polling', 'websocket'],
            extraHeaders: {
                'ngrok-skip-browser-warning': 'true'
            }
        });
        
        socket.on('connect', () => {
            status.innerHTML = '✅ Connected!';
            log.innerHTML += 'Connected with ID: ' + socket.id + '\n';
        });
        
        socket.on('connect_error', (error) => {
            status.innerHTML = '❌ Connection Error';
            log.innerHTML += 'Error: ' + error.message + '\n';
            log.innerHTML += 'Type: ' + error.type + '\n';
        });
        
        socket.on('disconnect', (reason) => {
            status.innerHTML = '🔴 Disconnected';
            log.innerHTML += 'Disconnected: ' + reason + '\n';
        });
    </script>
</body>
</html>